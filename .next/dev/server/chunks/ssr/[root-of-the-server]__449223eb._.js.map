{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/himanshuverma/Documents/GitHub/sspl/components/LogoutButton.js"],"sourcesContent":["\"use client\";\n\nexport default function LogoutButton() {\n  async function handleLogout() {\n    await fetch(\"/api/logout\", { method: \"POST\" });\n    window.location.href = \"/admin/login\";\n  }\n\n  return (\n    <button\n      type=\"button\"\n      onClick={handleLogout}\n      className=\"rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:text-slate-800\"\n    >\n      Log out\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS;IACtB,eAAe;QACb,MAAM,MAAM,eAAe;YAAE,QAAQ;QAAO;QAC5C,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,8OAAC;QACC,MAAK;QACL,SAAS;QACT,WAAU;kBACX;;;;;;AAIL","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/himanshuverma/Documents/GitHub/sspl/components/SubmissionsTable.js"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport * as XLSX from \"xlsx\";\nimport { useState } from \"react\";\n\nconst playerTypeLabels = {\n  batsman: \"Batsman\",\n  bowler: \"Bowler\",\n  all_rounder: \"All Rounder\",\n  other: \"Other\",\n};\n\nconst foodTypeLabels = {\n  veg: \"Veg\",\n  non_veg: \"Non-Veg\",\n  other: \"Other\",\n};\n\nconst feeLabels = {\n  yes: \"Payment YES\",\n  no: \"Payment NO\",\n  other: \"Other\",\n};\n\nfunction formatValue(primary, other, labels) {\n  if (labels && primary && labels[primary]) {\n    return other ? other : labels[primary];\n  }\n  if (other) return other;\n  return primary;\n}\n\nfunction buildExportRows(submissions) {\n  return submissions.map((submission) => ({\n    \"Submitted At\": new Date(submission.createdAt).toLocaleString(),\n    Name: submission.name,\n    Address: submission.address,\n    \"Player Type\": formatValue(\n      submission.playerType,\n      submission.playerTypeOther,\n      playerTypeLabels,\n    ),\n    \"T-Shirt Size\": submission.tshirtSize,\n    \"Jersey Name\": submission.jerseyName,\n    \"Jersey Number\": submission.jerseyNumber,\n    \"Food Preference\": formatValue(\n      submission.foodType,\n      submission.foodTypeOther,\n      foodTypeLabels,\n    ),\n    \"Fee Response\": formatValue(\n      submission.feeResponse,\n      submission.feeResponseOther,\n      feeLabels,\n    ),\n    \"Photo URL\": submission.photo\n      ? new URL(submission.photo, window.location.origin).href\n      : \"\",\n    \"Payment Screenshot URL\": submission.paymentScreenshot\n      ? new URL(submission.paymentScreenshot, window.location.origin).href\n      : \"\",\n    \"Submission ID\": submission.id,\n  }));\n}\n\nexport default function SubmissionsTable({ submissions }) {\n  const [modal, setModal] = useState(null);\n\n  function handleDownload() {\n    if (!submissions?.length) return;\n    const rows = buildExportRows(submissions);\n    const worksheet = XLSX.utils.json_to_sheet(rows);\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Submissions\");\n    const excelBuffer = XLSX.write(workbook, {\n      type: \"array\",\n      bookType: \"xlsx\",\n    });\n    const blob = new Blob([excelBuffer], {\n      type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    });\n    const url = URL.createObjectURL(blob);\n    const anchor = document.createElement(\"a\");\n    anchor.href = url;\n    anchor.download = `sspl-submissions-${Date.now()}.xlsx`;\n    anchor.click();\n    setTimeout(() => {\n      URL.revokeObjectURL(url);\n    }, 2000);\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {modal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4 py-8\">\n          <div className=\"relative max-h-[90vh] w-full max-w-3xl overflow-hidden rounded-2xl bg-white shadow-2xl\">\n            <button\n              type=\"button\"\n              onClick={() => setModal(null)}\n              className=\"absolute right-3 top-3 rounded-full bg-black/60 px-3 py-1 text-sm font-medium text-white hover:bg-black/80 focus:outline-none focus:ring-2 focus:ring-white/80\"\n            >\n              Close\n            </button>\n            <div className=\"flex flex-col gap-3 p-6\">\n              <h2 className=\"text-lg font-semibold text-slate-900\">\n                {modal.title}\n              </h2>\n              <div className=\"flex justify-between text-xs text-slate-500\">\n                <span>Player: {modal.submission.name}</span>\n                <span>\n                  Submitted{\" \"}\n                  {new Date(modal.submission.createdAt).toLocaleString()}\n                </span>\n              </div>\n              <figure className=\"flex flex-col items-center justify-center overflow-auto rounded-xl border border-slate-200 bg-slate-50 p-4\">\n                <Image\n                  src={modal.url}\n                  alt={modal.title}\n                  width={800}\n                  height={800}\n                  className=\"h-auto w-full max-h-[70vh] rounded-lg object-contain\"\n                />\n              </figure>\n            </div>\n          </div>\n        </div>\n      )}\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <p className=\"text-sm text-slate-600\">\n          Showing {submissions.length} record\n          {submissions.length !== 1 ? \"s\" : \"\"}.\n        </p>\n        <button\n          type=\"button\"\n          onClick={handleDownload}\n          disabled={!submissions.length}\n          className=\"inline-flex items-center justify-center gap-2 rounded-full bg-emerald-600 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-emerald-300\"\n        >\n          Download Excel\n        </button>\n      </div>\n\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-slate-200\">\n          <thead className=\"bg-slate-50\">\n            <tr className=\"text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">\n              <th className=\"px-4 py-3\">Submitted</th>\n              <th className=\"px-4 py-3\">Name</th>\n              <th className=\"px-4 py-3\">Address</th>\n              <th className=\"px-4 py-3\">Player Type</th>\n              <th className=\"px-4 py-3\">T-Shirt</th>\n              <th className=\"px-4 py-3\">Jersey</th>\n              <th className=\"px-4 py-3\">Food</th>\n              <th className=\"px-4 py-3\">Fee</th>\n              <th className=\"px-4 py-3\">Photo</th>\n              <th className=\"px-4 py-3\">Payment</th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-slate-200 bg-white text-sm text-slate-700\">\n            {submissions.length === 0 ? (\n              <tr>\n                <td\n                  className=\"px-4 py-6 text-center text-slate-500\"\n                  colSpan={10}\n                >\n                  No submissions yet. Registrations will appear here once\n                  players complete the form.\n                </td>\n              </tr>\n            ) : (\n              submissions.map((submission) => (\n                <tr key={submission.id} className=\"align-top\">\n                  <td className=\"px-4 py-3 text-xs text-slate-500\">\n                    {new Date(submission.createdAt).toLocaleString()}\n                  </td>\n                  <td className=\"px-4 py-3 font-semibold text-slate-900\">\n                    {submission.name}\n                  </td>\n                  <td className=\"px-4 py-3 whitespace-pre-wrap\">\n                    {submission.address}\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    {formatValue(\n                      submission.playerType,\n                      submission.playerTypeOther,\n                      playerTypeLabels,\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3\">{submission.tshirtSize}</td>\n                  <td className=\"px-4 py-3\">\n                    <div>{submission.jerseyName}</div>\n                    <div className=\"text-xs text-slate-500\">\n                      #{submission.jerseyNumber}\n                    </div>\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    {formatValue(\n                      submission.foodType,\n                      submission.foodTypeOther,\n                      foodTypeLabels,\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    {formatValue(\n                      submission.feeResponse,\n                      submission.feeResponseOther,\n                      feeLabels,\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    {submission.photo ? (\n                      <button\n                        type=\"button\"\n                        onClick={() =>\n                          setModal({\n                            title: \"Player Photo\",\n                            url: submission.photo,\n                            submission,\n                          })\n                        }\n                        className=\"text-emerald-600 hover:text-emerald-500\"\n                      >\n                        View photo\n                      </button>\n                    ) : (\n                      <span className=\"text-slate-400\">â€”</span>\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    {submission.paymentScreenshot ? (\n                      <button\n                        type=\"button\"\n                        onClick={() =>\n                          setModal({\n                            title: \"Payment Screenshot\",\n                            url: submission.paymentScreenshot,\n                            submission,\n                          })\n                        }\n                        className=\"text-emerald-600 hover:text-emerald-500\"\n                      >\n                        View payment\n                      </button>\n                    ) : (\n                      <span className=\"text-slate-400\">â€”</span>\n                    )}\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}